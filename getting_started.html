<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.4">
    <meta name="project" content="ExCastorEDC v0.3.0-dev">

    <title>Using the Castor EDC API — ExCastorEDC v0.3.0-dev</title>
    <link rel="stylesheet" href="dist/elixir-b6f1ed5df9b1d42a7309.css" />

    <script src="dist/sidebar_items-4f0997f627.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-bd1cb213813bf4825aa2.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="https://www.castoredc.com/" class="sidebar-projectName" translate="no">
ExCastorEDC
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.3.0-dev
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/basbl/ex_castor_edc/blob/0.3.0-dev/notebook/getting_started.livemd#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>Using the Castor EDC API</span>
</h1>

  <div class="livebook-badge-container">
    <a href="#" class="livebook-badge">
      <img src="https://livebook.dev/badge/v1/blue.svg" alt="Run in Livebook" width="150" />
    </a>
  </div>

<pre><code class="makeup elixir" translate="no"><span class="nc">Mix</span><span class="o">.</span><span class="n">install</span><span class="p" data-group-id="2039118081-1">(</span><span class="p" data-group-id="2039118081-2">[</span><span class="w">
  </span><span class="p" data-group-id="2039118081-3">{</span><span class="ss">:ex_castor_edc</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.2.0&quot;</span><span class="p" data-group-id="2039118081-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="2039118081-4">{</span><span class="ss">:kino</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 0.6.1&quot;</span><span class="p" data-group-id="2039118081-4">}</span><span class="w">
</span><span class="p" data-group-id="2039118081-2">]</span><span class="p" data-group-id="2039118081-1">)</span></code></pre><h2 id="introduction" class="section-heading">
  <a href="#introduction" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">introduction</p>
  </a>
  Introduction
</h2>
<p>This notebook serves as an introduction on how to use the API wrapper. It's not meant to be an exhaustive guide.</p><h2 id="authentication" class="section-heading">
  <a href="#authentication" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">authentication</p>
  </a>
  Authentication
</h2>
<p>Before we can start making requests to the API we need to have a <code class="inline">client_id</code> and a <code class="inline">client_secret</code>. You can get this information from the <a href="https://data.castoredc.com/account/settings">account settings page</a>.</p><p>Enter your <code class="inline">client_id</code> and <code class="inline">client_secret</code> in the form below after evaluating the code-block.</p><pre><code class="makeup elixir" translate="no"><span class="n">endpoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2871978054-1">[</span><span class="w">
  </span><span class="p" data-group-id="2871978054-2">{</span><span class="s">&quot;https://data.castoredc.com/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;NL&quot;</span><span class="p" data-group-id="2871978054-2">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="2871978054-3">{</span><span class="s">&quot;https://uk.castoredc.com/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;UK&quot;</span><span class="p" data-group-id="2871978054-3">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="2871978054-4">{</span><span class="s">&quot;https://us.castoredc.com/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;US&quot;</span><span class="p" data-group-id="2871978054-4">}</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="2871978054-5">{</span><span class="s">&quot;https://au.castoredc.com/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AU&quot;</span><span class="p" data-group-id="2871978054-5">}</span><span class="w">
</span><span class="p" data-group-id="2871978054-1">]</span><span class="w">

</span><span class="n">endpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="2871978054-6">(</span><span class="s">&quot;Region&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">endpoints</span><span class="p" data-group-id="2871978054-6">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kino</span><span class="o">.</span><span class="n">render</span><span class="p" data-group-id="2871978054-7">(</span><span class="p" data-group-id="2871978054-7">)</span><span class="w">
</span><span class="n">client_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">text</span><span class="p" data-group-id="2871978054-8">(</span><span class="s">&quot;Client Id&quot;</span><span class="p" data-group-id="2871978054-8">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kino</span><span class="o">.</span><span class="n">render</span><span class="p" data-group-id="2871978054-9">(</span><span class="p" data-group-id="2871978054-9">)</span><span class="w">
</span><span class="n">client_secret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">password</span><span class="p" data-group-id="2871978054-10">(</span><span class="s">&quot;Client Secret&quot;</span><span class="p" data-group-id="2871978054-10">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Kino</span><span class="o">.</span><span class="n">render</span><span class="p" data-group-id="2871978054-11">(</span><span class="p" data-group-id="2871978054-11">)</span><span class="w">

</span><span class="nc">Kino</span><span class="o">.</span><span class="n">nothing</span><span class="p" data-group-id="2871978054-12">(</span><span class="p" data-group-id="2871978054-12">)</span></code></pre><p>Next we need to exchange your <code class="inline">client_id</code> and <code class="inline">client_secret</code> for an access token. The access token can then be used to make other requests to the API.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4936533916-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p" data-group-id="4936533916-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC</span><span class="o">.</span><span class="n">authenticate</span><span class="p" data-group-id="4936533916-2">(</span><span class="w">
    </span><span class="nc">CastorEDC.Client</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="4936533916-3">(</span><span class="w">
      </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="4936533916-4">(</span><span class="n">client_id</span><span class="p" data-group-id="4936533916-4">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="4936533916-5">(</span><span class="n">client_secret</span><span class="p" data-group-id="4936533916-5">)</span><span class="p">,</span><span class="w">
      </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="4936533916-6">(</span><span class="n">endpoint</span><span class="p" data-group-id="4936533916-6">)</span><span class="w">
    </span><span class="p" data-group-id="4936533916-3">)</span><span class="w">
  </span><span class="p" data-group-id="4936533916-2">)</span><span class="w">

</span><span class="n">client</span></code></pre><h2 id="performing-authenticated-api-requests" class="section-heading">
  <a href="#performing-authenticated-api-requests" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">performing-authenticated-api-requests</p>
  </a>
  Performing authenticated API requests
</h2>
<p>Let's start at the beginning and fetch all of the studies that you have access to with your account.</p><p>All function calls return a 3 element tuple. The first element is the http status code, the second element is the decoded response from the API, and the last element is the raw response that came back from the server.</p><p>We'll make extensive use of pattern-matching to collect that the data that we're interested in, while ignoring the rest.</p><p>Most API calls support pagination but we'll mostly focus on the first page of the results. If you want to fetch the second page it's possible to pass the page number as a keyword option e.g. <code class="inline">page: 2</code></p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="2263695981-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2263695981-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2263695981-3">%{</span><span class="s">&quot;study&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">studies</span><span class="p" data-group-id="2263695981-3">}</span><span class="p" data-group-id="2263695981-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="2263695981-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CastorEDC.Common.Studies</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="2263695981-4">(</span><span class="n">client</span><span class="p" data-group-id="2263695981-4">)</span><span class="w">

</span><span class="n">studies</span></code></pre><p>Now that we have a list of all the studies we'll need to pick one to dig deeper into with further API requests.</p><pre><code class="makeup elixir" translate="no"><span class="n">studies</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="n">studies</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="4240351952-1">(</span><span class="o">&amp;</span><span class="p" data-group-id="4240351952-2">{</span><span class="ni">&amp;1</span><span class="p" data-group-id="4240351952-3">[</span><span class="s">&quot;study_id&quot;</span><span class="p" data-group-id="4240351952-3">]</span><span class="p">,</span><span class="w"> </span><span class="ni">&amp;1</span><span class="p" data-group-id="4240351952-4">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="4240351952-4">]</span><span class="p" data-group-id="4240351952-2">}</span><span class="p" data-group-id="4240351952-1">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="4240351952-5">(</span><span class="k" data-group-id="4240351952-6">fn</span><span class="w"> </span><span class="p" data-group-id="4240351952-7">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p" data-group-id="4240351952-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4240351952-8">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="4240351952-8">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k" data-group-id="4240351952-6">end</span><span class="p" data-group-id="4240351952-5">)</span><span class="w">

</span><span class="n">study_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="4240351952-9">(</span><span class="s">&quot;Select a study&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">studies</span><span class="p" data-group-id="4240351952-9">)</span></code></pre><p>Let's read the chosen study into an easily accessible variable that we can reuse with other requests.</p><pre><code class="makeup elixir" translate="no"><span class="n">study_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="5743718814-1">(</span><span class="n">study_id</span><span class="p" data-group-id="5743718814-1">)</span></code></pre><h2 id="institutes" class="section-heading">
  <a href="#institutes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">institutes</p>
  </a>
  Institutes
</h2>
<p>With a study id in our hands we can start digging, let's start with finding out which institutes the study is being conducted in!</p><p>You'll get the option to also run write calls against the API. Make sure that you've chosen a test institute as to not put data where it doesn't belong.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="0667457014-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0667457014-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="0667457014-3">%{</span><span class="s">&quot;institutes&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">institutes</span><span class="p" data-group-id="0667457014-3">}</span><span class="p" data-group-id="0667457014-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="0667457014-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.Common.Institutes</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="0667457014-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p" data-group-id="0667457014-4">)</span><span class="w">

</span><span class="n">institutes</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="n">institutes</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">filter</span><span class="p" data-group-id="0667457014-5">(</span><span class="o">&amp;</span><span class="p" data-group-id="0667457014-6">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="0667457014-7">[</span><span class="s">&quot;deleted&quot;</span><span class="p" data-group-id="0667457014-7">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="0667457014-6">)</span><span class="p" data-group-id="0667457014-5">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="0667457014-8">(</span><span class="o">&amp;</span><span class="p" data-group-id="0667457014-9">{</span><span class="ni">&amp;1</span><span class="p" data-group-id="0667457014-10">[</span><span class="s">&quot;id&quot;</span><span class="p" data-group-id="0667457014-10">]</span><span class="p">,</span><span class="w"> </span><span class="ni">&amp;1</span><span class="p" data-group-id="0667457014-11">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="0667457014-11">]</span><span class="p" data-group-id="0667457014-9">}</span><span class="p" data-group-id="0667457014-8">)</span><span class="w">

</span><span class="n">institute_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">select</span><span class="p" data-group-id="0667457014-12">(</span><span class="s">&quot;Choose your test institute&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">institutes</span><span class="p" data-group-id="0667457014-12">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="n">institute_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Kino.Input</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="8086522760-1">(</span><span class="n">institute_id</span><span class="p" data-group-id="8086522760-1">)</span></code></pre><h2 id="records" class="section-heading">
  <a href="#records" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">records</p>
  </a>
  Records
</h2>
<p>The <code class="inline">CastorEDC.Records</code> module is our gateway into fetching information about our records. We can either fetch entire lists or fetch specific ones. With the <code class="inline">create</code> function we can even directly create new ones in our study.</p><p>Let's start with fetching the first 10.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="6733971612-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6733971612-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="6733971612-3">%{</span><span class="s">&quot;records&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">records</span><span class="p" data-group-id="6733971612-3">}</span><span class="p" data-group-id="6733971612-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="6733971612-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.DataCollection.Records</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="6733971612-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p">,</span><span class="w"> </span><span class="ss">page_size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="6733971612-4">)</span><span class="w">

</span><span class="n">records</span></code></pre><p>As you can see we now have a list of all the records enrolled in the the study. Let's take the first one from the list and find out more about it.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="0713057727-1">[</span><span class="p" data-group-id="0713057727-2">%{</span><span class="s">&quot;id&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">record_id</span><span class="p" data-group-id="0713057727-2">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="0713057727-1">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">records</span><span class="w">

</span><span class="p" data-group-id="0713057727-3">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="n">record</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="0713057727-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">CastorEDC.DataCollection.Records</span><span class="o">.</span><span class="n">find</span><span class="p" data-group-id="0713057727-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p">,</span><span class="w"> </span><span class="n">record_id</span><span class="p" data-group-id="0713057727-4">)</span><span class="w">

</span><span class="n">record</span></code></pre><p>It's also possible to create new Records via the API allowing for the enrollment of records through external systems.</p><p><strong>Before you evaluate the code-block below double-check the selected institute, you also need record creation permission for the given institute.</strong></p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="3102832385-1">{</span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="n">new_record</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="3102832385-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.DataCollection.Records</span><span class="o">.</span><span class="n">create</span><span class="p" data-group-id="3102832385-2">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3102832385-3">%{</span><span class="ss">institute_id</span><span class="p">:</span><span class="w"> </span><span class="n">institute_id</span><span class="p" data-group-id="3102832385-3">}</span><span class="p" data-group-id="3102832385-2">)</span><span class="w">

</span><span class="n">new_record</span></code></pre><h2 id="study-structure" class="section-heading">
  <a href="#study-structure" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">study-structure</p>
  </a>
  Study Structure
</h2>
<p>It's also possible to fetch the elements</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="5499911633-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5499911633-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="5499911633-3">%{</span><span class="s">&quot;phases&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">phases</span><span class="p" data-group-id="5499911633-3">}</span><span class="p" data-group-id="5499911633-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="5499911633-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.StudyProtocol.Phases</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="5499911633-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p" data-group-id="5499911633-4">)</span><span class="w">

</span><span class="n">phases</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="5499911633-5">(</span><span class="o">&amp;</span><span class="p" data-group-id="5499911633-6">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="5499911633-7">[</span><span class="s">&quot;phase_order&quot;</span><span class="p" data-group-id="5499911633-7">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p" data-group-id="5499911633-8">[</span><span class="s">&quot;phase_order&quot;</span><span class="p" data-group-id="5499911633-8">]</span><span class="p" data-group-id="5499911633-6">)</span><span class="p" data-group-id="5499911633-5">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="2715892457-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2715892457-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2715892457-3">%{</span><span class="s">&quot;steps&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">steps</span><span class="p" data-group-id="2715892457-3">}</span><span class="p" data-group-id="2715892457-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="2715892457-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.StudyProtocol.Steps</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="2715892457-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p" data-group-id="2715892457-4">)</span><span class="w">

</span><span class="n">steps</span><span class="w">
</span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">sort</span><span class="p" data-group-id="2715892457-5">(</span><span class="o">&amp;</span><span class="p" data-group-id="2715892457-6">(</span><span class="ni">&amp;1</span><span class="p" data-group-id="2715892457-7">[</span><span class="s">&quot;step_order&quot;</span><span class="p" data-group-id="2715892457-7">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p" data-group-id="2715892457-8">[</span><span class="s">&quot;step_order&quot;</span><span class="p" data-group-id="2715892457-8">]</span><span class="p" data-group-id="2715892457-6">)</span><span class="p" data-group-id="2715892457-5">)</span></code></pre><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="9282396178-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9282396178-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9282396178-3">%{</span><span class="s">&quot;fields&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">fields</span><span class="p" data-group-id="9282396178-3">}</span><span class="p" data-group-id="9282396178-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="9282396178-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.StudyProtocol.Fields</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="9282396178-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p" data-group-id="9282396178-4">)</span><span class="w">

</span><span class="n">fields</span></code></pre><h2 id="collected-data" class="section-heading">
  <a href="#collected-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">collected-data</p>
  </a>
  Collected Data
</h2>
<h2 id="study-data" class="section-heading">
  <a href="#study-data" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">study-data</p>
  </a>
  Study Data
</h2>
<p>Fetching your study data is easy. Remember that this API call is paginated, so you'll need to make multiple API calls to actually get everything.</p><p>As an example we'll only fetch the first 10 data points on page 1.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4858043176-1">{</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4858043176-2">%{</span><span class="s">&quot;_embedded&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="4858043176-3">%{</span><span class="s">&quot;items&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">study_data_points</span><span class="p" data-group-id="4858043176-3">}</span><span class="p" data-group-id="4858043176-2">}</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="4858043176-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">CastorEDC.DataCollection.DataPoints.StudyDataPointCollection</span><span class="o">.</span><span class="n">list</span><span class="p" data-group-id="4858043176-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="n">study_id</span><span class="p">,</span><span class="w">
    </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="ss">page_size</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p" data-group-id="4858043176-4">)</span><span class="w">

</span><span class="n">study_data_points</span></code></pre><h2 id="wrapping-up" class="section-heading">
  <a href="#wrapping-up" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">wrapping-up</p>
  </a>
  Wrapping up
</h2>
<p>I hope that this notebook has given you a taste of how the library works. The documentation lists all of the available endpoints that you can use.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="api-reference.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
API Reference
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/ex_castor_edc/0.3.0-dev" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/ex_castor_edc/0.3.0-dev" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/ex_castor_edc/0.3.0-dev/show/notebook/getting_started.livemd">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
